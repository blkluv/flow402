(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{4973:function(e,t,n){Promise.resolve().then(n.bind(n,2019))},2019:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(7437),l=n(2265),o=n(8782);let a=n(5566).env.NEXT_PUBLIC_BACKEND_URL||"https://flowserver.onrender.com",s=a.endsWith("/")?a.slice(0,-1):a;function i(){let{publicKey:e,connected:t}=(0,o.O)(),n=(0,l.useMemo)(()=>e?e.toBase58():"",[e]),[a,i]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),[h,b]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[x,v]=(0,l.useState)("1000000"),[g,y]=(0,l.useState)("video"),[w,j]=(0,l.useState)(!1),[N,T]=(0,l.useState)(""),[P,k]=(0,l.useState)("");async function S(e){e.preventDefault(),j(!0),T(""),k("");try{let e={ownerPublicKey:a,title:c,description:d,videoUrl:h,thumbnailUrl:p,lamportsPerSecond:Number(x),contentType:g},t=await fetch("".concat(s,"/videos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw Error((null==n?void 0:n.error)||"Submission failed");T("Your video is pending admin approval."),u(""),m(""),b(""),f(""),v("")}catch(e){k(e.message||"Submission failed")}finally{j(!1)}}return(0,l.useEffect)(()=>{n&&!a&&i(n)},[n]),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"bg-neutral-900/60 border border-neutral-800 rounded-xl p-6 shadow-lg",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Submit a Video"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Provide a hosted video URL and thumbnail, plus a price in lamports per second."}),(0,r.jsx)("div",{className:"mb-4 text-sm text-gray-400",children:"Paste your public key below."}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Owner Public Key"}),(0,r.jsx)("input",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",value:a,onChange:e=>i(e.target.value),placeholder:"Paste your wallet address",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Title"}),(0,r.jsx)("input",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Description"}),(0,r.jsx)("textarea",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",rows:3,value:d,onChange:e=>m(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Content Type"}),(0,r.jsxs)("select",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",value:g,onChange:e=>y(e.target.value),children:[(0,r.jsx)("option",{value:"video",children:"Video (VOD)"}),(0,r.jsx)("option",{value:"live",children:"Livestream"}),(0,r.jsx)("option",{value:"movie",children:"Movie"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"live"===g?"Paste your YouTube Live or Twitch embed URL":"movie"===g?"Full-length film or long-form content":"Pre-recorded video content"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Video URL"}),(0,r.jsx)("input",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",type:"url",value:h,onChange:e=>(function(e){b(e);let t=function(e){try{let t=new URL(e);if("youtu.be"===t.hostname)return t.pathname.slice(1).split("?")[0];if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/embed/"))return t.pathname.split("/embed/")[1].split("/")[0];if(t.searchParams.get("v"))return t.searchParams.get("v")}}catch(e){}return null}(e);if(t){let e="https://www.youtube.com/embed/".concat(t),n="https://img.youtube.com/vi/".concat(t,"/hqdefault.jpg");b(e),p||f(n);return}let n=function(e){try{let t=new URL(e);if(t.hostname.includes("twitch.tv")){if("player.twitch.tv"===t.hostname)return t.searchParams.get("channel")||null;let e=t.pathname.split("/").filter(Boolean);if(e.length>0)return e[0]}}catch(e){}return null}(e);if(n){let e=window.location.hostname||"flow402.dev";b("https://player.twitch.tv/?channel=".concat(n,"&parent=").concat(e));return}})(e.target.value),required:!0,placeholder:"https://youtu.be/... or https://www.youtube.com/embed/VIDEO_ID or https://player.vimeo.com/..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Thumbnail URL"}),(0,r.jsx)("input",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",type:"url",value:p,onChange:e=>f(e.target.value),required:!0,placeholder:"https://..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Price (fixed)"}),(0,r.jsx)("input",{className:"w-full bg-black/30 border border-neutral-800 rounded px-3 py-2 text-sm outline-none focus:border-neutral-600",type:"text",value:"1,000,000 lamports/s (10 FLOW/s)",readOnly:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:w,className:"w-full bg-white text-black font-medium rounded px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Submitting...":"Submit"}),N&&(0,r.jsx)("div",{className:"text-green-400 text-sm",children:N}),P&&(0,r.jsx)("div",{className:"text-red-400 text-sm",children:P})]})]})})}},5566:function(e){var t,n,r,l=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var i=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?i=r.concat(i):u=-1,i.length&&m())}function m(){if(!c){var e=s(d);c=!0;for(var t=i.length;t;){for(r=i,i=[];++u<t;)r&&r[u].run();u=-1,t=i.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function b(){}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new h(e,t)),1!==i.length||c||s(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=b,l.addListener=b,l.once=b,l.off=b,l.removeListener=b,l.removeAllListeners=b,l.emit=b,l.prependListener=b,l.prependOnceListener=b,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}},8782:function(e,t,n){"use strict";n.d(t,{O:function(){return i},z:function(){return s}});var r=n(2265);let l=[],o={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){a("call","select")},connect:()=>Promise.reject(a("call","connect")),disconnect:()=>Promise.reject(a("call","disconnect")),sendTransaction:()=>Promise.reject(a("call","sendTransaction")),signTransaction:()=>Promise.reject(a("call","signTransaction")),signAllTransactions:()=>Promise.reject(a("call","signAllTransactions")),signMessage:()=>Promise.reject(a("call","signMessage")),signIn:()=>Promise.reject(a("call","signIn"))};function a(e,t){let n=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}Object.defineProperty(o,"wallets",{get:()=>(a("read","wallets"),l)}),Object.defineProperty(o,"wallet",{get:()=>(a("read","wallet"),null)}),Object.defineProperty(o,"publicKey",{get:()=>(a("read","publicKey"),null)});let s=(0,r.createContext)(o);function i(){return(0,r.useContext)(s)}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4973)}),_N_E=e.O()}]);